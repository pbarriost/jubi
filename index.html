<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Jubi ğŸ‰</title>

<style>
body {
    font-family: Arial, sans-serif;
    text-align: center;
    background: #f7f7f7;
    padding: 30px;
}

h1 {
    font-size: 2.5em;
}

input, button {
    font-size: 1.2em;
    padding: 5px;
}

#contenedorBarra {
    width: 80%;
    height: 40px;
    background: #ddd;
    margin: 30px auto;
    border-radius: 20px;
    overflow: hidden;
}

#barra {
    height: 100%;
    width: 0%;
    background: red;
    transition: width 0.5s, background 0.5s;
}

#resultado {
    font-size: 1.4em;
    margin-top: 20px;
}

#mensaje {
    font-size: 2em;
    margin-top: 20px;
}
</style>
</head>

<body>

<h1>ğŸ‰ Jubi ğŸ‰</h1>

<p>Fecha de nacimiento:</p>
<input type="date" id="nacimiento">

<p>Edad de jubilaciÃ³n:</p>
<input type="number" id="edadJubi" value="65">

<br><br>
<button onclick="iniciar()">Iniciar ğŸš€</button>

<div id="contenedorBarra">
    <div id="barra"></div>
</div>

<div id="resultado"></div>
<div id="mensaje"></div>

<script>

let intervalo;

function iniciar() {
    const nacimientoStr = document.getElementById("nacimiento").value;
    if (!nacimientoStr) {
        alert("ElegÃ­ tu fecha de nacimiento ğŸ™‚");
        return;
    }

    const nacimiento = new Date(nacimientoStr);
    const edadJubi = parseInt(document.getElementById("edadJubi").value);

    const fechaJubi = new Date(nacimiento);
    fechaJubi.setFullYear(nacimiento.getFullYear() + edadJubi);

    const inicioVida = nacimiento.getTime();
    const finVidaLaboral = fechaJubi.getTime();

    if (intervalo) clearInterval(intervalo);

    function actualizar() {
        const ahora = new Date().getTime();

        const total = finVidaLaboral - inicioVida;
        const recorrido = ahora - inicioVida;
        const restante = finVidaLaboral - ahora;

        if (restante <= 0) {
            document.getElementById("barra").style.width = "100%";
            document.getElementById("barra").style.background = "green";
            document.getElementById("resultado").innerHTML = "ğŸ‰ Â¡YA TE JUBILASTE! ğŸ‰";
            document.getElementById("mensaje").innerHTML = "ğŸ¥‚ A disfrutar la vida ğŸ–ï¸";
            clearInterval(intervalo);
            return;
        }

        const segundos = Math.floor(restante / 1000) % 60;
        const minutos = Math.floor(restante / (1000 * 60)) % 60;
        const horas = Math.floor(restante / (1000 * 60 * 60)) % 24;
        const dias = Math.floor(restante / (1000 * 60 * 60 * 24));
        const anios = Math.floor(dias / 365);

        const porcentaje = Math.min(100, (recorrido / total) * 100);

        const barra = document.getElementById("barra");
        barra.style.width = porcentaje.toFixed(4) + "%";

        // Color progresivo
        if (porcentaje < 50) {
            barra.style.background = "red";
        } else if (porcentaje < 80) {
            barra.style.background = "orange";
        } else {
            barra.style.background = "green";
        }

        document.getElementById("resultado").innerHTML =
            `â³ Te faltan: <br><b>${anios}</b> aÃ±os, <b>${dias % 365}</b> dÃ­as, <b>${horas}</b> horas, <b>${minutos}</b> minutos y <b>${segundos}</b> segundos`;

        let mensaje = "ğŸ’ª Â¡Vamos que se puede!";
        if (porcentaje > 50) mensaje = "ğŸ˜ƒ Â¡Ya pasaste la mitad!";
        if (porcentaje > 80) mensaje = "ğŸ‰ Â¡Ãšltima recta!";
        if (porcentaje > 90) mensaje = "ğŸ¾ Â¡Se huele el corcho!";

        document.getElementById("mensaje").innerHTML = mensaje;
    }

    actualizar();
    intervalo = setInterval(actualizar, 1000);
}

</script>

</body>
</html>
