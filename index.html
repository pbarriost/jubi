<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Jubi Uruguay ğŸ‡ºğŸ‡¾ğŸ‰</title>

<style>
body {
    font-family: Arial, sans-serif;
    text-align: center;
    background: #f7f7f7;
    padding: 30px;
}

h1 { font-size: 2.5em; }

input, button {
    font-size: 1.1em;
    padding: 6px;
}

#contenedorBarra {
    width: 80%;
    height: 40px;
    background: #ddd;
    margin: 30px auto;
    border-radius: 20px;
    overflow: hidden;
}

#barra {
    height: 100%;
    width: 0%;
    background: red;
    transition: width 0.5s, background 0.5s;
}

#resultado {
    font-size: 1.3em;
    margin-top: 20px;
}

#mensaje {
    font-size: 1.8em;
    margin-top: 20px;
}
</style>
</head>

<body>

<h1>ğŸ‡ºğŸ‡¾ Jubi Uruguay ğŸ‰</h1>

<p>Fecha de nacimiento:</p>
<input type="date" id="nacimiento">

<p>Â¿A quÃ© edad empezaste a trabajar?</p>
<input type="number" id="inicioTrabajo" value="20">

<br><br>
<button onclick="iniciar()">Calcular ğŸš€</button>

<div id="contenedorBarra">
    <div id="barra"></div>
</div>

<div id="resultado"></div>
<div id="mensaje"></div>

<script>

let intervalo;

function iniciar() {
    const nacimientoStr = document.getElementById("nacimiento").value;
    if (!nacimientoStr) {
        alert("ElegÃ­ tu fecha de nacimiento ğŸ™‚");
        return;
    }

    const nacimiento = new Date(nacimientoStr);
    const inicioTrabajoEdad = parseInt(document.getElementById("inicioTrabajo").value);

    const fecha60 = new Date(nacimiento);
    fecha60.setFullYear(nacimiento.getFullYear() + 60);

    const fecha30Trabajo = new Date(nacimiento);
    fecha30Trabajo.setFullYear(nacimiento.getFullYear() + inicioTrabajoEdad + 30);

    // La fecha real es la mÃ¡s lejana
    const fechaRealJubi = new Date(Math.max(fecha60.getTime(), fecha30Trabajo.getTime()));

    const inicioVida = nacimiento.getTime();
    const fin = fechaRealJubi.getTime();

    if (intervalo) clearInterval(intervalo);

    function actualizar() {
        const ahora = new Date().getTime();
        const total = fin - inicioVida;
        const recorrido = ahora - inicioVida;
        const restante = fin - ahora;

        if (restante <= 0) {
            document.getElementById("barra").style.width = "100%";
            document.getElementById("barra").style.background = "green";
            document.getElementById("resultado").innerHTML = "ğŸ‰ Â¡YA TE PODÃ‰S JUBILAR! ğŸ‰";
            document.getElementById("mensaje").innerHTML = "ğŸ¥‚ Â¡Se terminÃ³ la vida laboral!";
            clearInterval(intervalo);
            return;
        }

        const segundos = Math.floor(restante / 1000) % 60;
        const minutos = Math.floor(restante / (1000 * 60)) % 60;
        const horas = Math.floor(restante / (1000 * 60 * 60)) % 24;
        const diasTotales = Math.floor(restante / (1000 * 60 * 60 * 24));
        const anios = Math.floor(diasTotales / 365);
        const dias = diasTotales % 365;

        const porcentaje = Math.min(100, (recorrido / total) * 100);

        const barra = document.getElementById("barra");
        barra.style.width = porcentaje.toFixed(4) + "%";

        if (porcentaje < 50) barra.style.background = "red";
        else if (porcentaje < 80) barra.style.background = "orange";
        else barra.style.background = "green";

        document.getElementById("resultado").innerHTML = `
        â³ Te falta para jubilarte:<br>
        <b>${anios}</b> aÃ±os, <b>${dias}</b> dÃ­as, <b>${horas}</b> horas, <b>${minutos}</b> minutos y <b>${segundos}</b> segundos<br><br>
        ğŸ“… CumplÃ­s 60 el: <b>${fecha60.toLocaleDateString()}</b><br>
        ğŸ’¼ CompletÃ¡s 30 aÃ±os de trabajo el: <b>${fecha30Trabajo.toLocaleDateString()}</b><br>
        ğŸ Fecha real de jubilaciÃ³n: <b>${fechaRealJubi.toLocaleDateString()}</b>
        `;

        let mensaje = "ğŸ’ª Vamos arriba que falta pero se llega";
        if (porcentaje > 50) mensaje = "ğŸ˜ƒ Â¡Ya pasaste la mitad!";
        if (porcentaje > 80) mensaje = "ğŸ‰ Â¡Ãšltima recta!";
        if (porcentaje > 90) mensaje = "ğŸ¾ Â¡Se huele el corcho!";
        if (porcentaje > 97) mensaje = "ğŸ¥³ Â¡AndÃ¡ eligiendo destino!";

        document.getElementById("mensaje").innerHTML = mensaje;
    }

    actualizar();
    intervalo = setInterval(actualizar, 1000);
}

</script>

</body>
</html>

